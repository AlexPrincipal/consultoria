{
  "entities": {
    "HomePage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HomePage",
      "type": "object",
      "description": "Represents the content of the homepage, allowing administrative modification of texts and images.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the HomePage entity." },
        "heroHeadline": { "type": "string", "description": "Main headline text in the hero section." },
        "heroSubhead": { "type": "string", "description": "Subheadline text in the hero section." },
        "heroPrimaryCtaText": { "type": "string", "description": "Text for the primary call-to-action button in the hero section." },
        "heroSecondaryCtaText": { "type": "string", "description": "Text for the secondary call-to-action button in the hero section." },
        "servicesOverviewTitle": { "type": "string", "description": "Title for the services overview section." },
        "servicesOverviewSubhead": { "type": "string", "description": "Subheadline for the services overview section." },
        "service1Title": { "type": "string", "description": "Title for the first service card." },
        "service1Description": { "type": "string", "description": "Description for the first service card." },
        "service2Title": { "type": "string", "description": "Title for the second service card." },
        "service2Description": { "type": "string", "description": "Description for the second service card." },
        "service3Title": { "type": "string", "description": "Title for the third service card." },
        "service3Description": { "type": "string", "description": "Description for the third service card." },
        "service4Title": { "type": "string", "description": "Title for the fourth service card." },
        "service4Description": { "type": "string", "description": "Description for the fourth service card." },
        "service5Title": { "type": "string", "description": "Title for the fifth service card." },
        "service5Description": { "type": "string", "description": "Description for the fifth service card." },
        "service6Title": { "type": "string", "description": "Title for the sixth service card." },
        "service6Description": { "type": "string", "description": "Description for the sixth service card." },
        "service7Title": { "type": "string", "description": "Title for the seventh service card." },
        "service7Description": { "type": "string", "description": "Description for the seventh service card." },
        "service8Title": { "type": "string", "description": "Title for the eighth service card." },
        "service8Description": { "type": "string", "description": "Description for the eighth service card." },
        "whyUsTitle": { "type": "string", "description": "Title for the 'Why Choose Us' section." },
        "whyUsSubhead": { "type": "string", "description": "Subheadline for the 'Why Choose Us' section." },
        "whyUsFeature1Title": { "type": "string", "description": "Title for the first feature in 'Why Us'." },
        "whyUsFeature1Desc": { "type": "string", "description": "Description for the first feature in 'Why Us'." },
        "whyUsFeature2Title": { "type": "string", "description": "Title for the second feature in 'Why Us'." },
        "whyUsFeature2Desc": { "type": "string", "description": "Description for the second feature in 'Why Us'." },
        "whyUsFeature3Title": { "type": "string", "description": "Title for the third feature in 'Why Us'." },
        "whyUsFeature3Desc": { "type": "string", "description": "Description for the third feature in 'Why Us'." },
        "whyUsCtaText": { "type": "string", "description": "CTA button text for the 'Why Us' section." },
        "teamTitle": { "type": "string", "description": "Title for the team section." },
        "teamSubhead": { "type": "string", "description": "Subheadline for the team section." },
        "teamCtaText": { "type": "string", "description": "CTA button text for the team section." },
        "officeTitle": { "type": "string", "description": "Title for the office preview section." },
        "officeSubhead": { "type": "string", "description": "Subheadline for the office preview section." },
        "officeCtaText": { "type": "string", "description": "CTA button text for the office preview section." },
        "aboutTitle": { "type": "string", "description": "Title for the 'About Us' preview section." },
        "aboutSubhead": { "type": "string", "description": "Subheadline for the 'About Us' preview section." },
        "aboutCtaText": { "type": "string", "description": "CTA button text for the 'About Us' preview section." },
        "contactUsTitle": { "type": "string", "description": "Title for the final contact us section." },
        "contactUsSubhead": { "type": "string", "description": "Subheadline for the final contact us section." },
        "contactUsCtaText": { "type": "string", "description": "CTA button text for the final contact us section." },
        "heroBackgroundImageUrl": { "type": "string", "description": "URL of the background image in the hero section.", "format": "uri" }
      },
      "required": ["id"]
    },
    "role_admin": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "role_admin",
      "type": "object",
      "description": "An entity representing an administrative role. The existence of a document with the user's UID in the 'roles_admin' collection grants them admin privileges.",
      "properties": {
        "uid": { "type": "string", "description": "The UID of the user with admin role." },
        "assignedAt": { "type": "string", "format": "date-time", "description": "The timestamp when the admin role was assigned." }
      },
      "required": ["uid", "assignedAt"]
    }
  },
  "auth": { "providers": ["password", "anonymous"] },
  "firestore": {
    "structure": [
      {
        "path": "/homePageContent/{homePageId}",
        "definition": {
          "entityName": "HomePage",
          "schema": { "$ref": "#/backend/entities/HomePage" },
          "description": "Stores the content for the homepage. Only admins can modify the content.",
          "params": [{ "name": "homePageId", "description": "The ID of the homepage document. Should be a single, well-known ID (e.g., 'main')." }]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "role_admin",
          "schema": { "$ref": "#/backend/entities/role_admin" },
          "description": "Collection to store admin roles. Existence of a document with the user's ID grants admin access.",
          "params": [{ "name": "userId", "description": "The UID of the user." }]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to manage the content of the CMXS Jur√≠dico homepage, allowing administrators to easily update texts and images. A single collection, `homePageContent`, stores the homepage data. An admin role is used to control write access to the collection.\n\n**Authorization Independence**: Authorization independence is achieved by using a separate `/roles_admin/{uid}` collection to determine administrative privileges. Security rules check for the existence of a document in this collection to grant write access, avoiding the need to read data from other documents to determine permissions. This ensures atomic operations are possible and simplifies debugging.\n\n**QAPs (Rules are not Filters)**: The `homePageContent` collection contains only one document (or a small, manageable number) representing the homepage content, so `list` operations are not a primary concern. The focus is on controlling write access to this document.\n\n**Admin Role**: The `/roles_admin/{uid}` collection facilitates global roles. The existence of a document indicates admin status, simplifying rules and avoiding custom claims."
  }
}
